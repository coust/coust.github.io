(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{11:function(e,t,a){e.exports={aside:"Aside_aside__3tOh5",shareLinkInput:"Aside_shareLinkInput__17WQ3",copyResult:"Aside_copyResult__n20eV",faqButton:"Aside_faqButton__bghCv",lastUpdate:"Aside_lastUpdate__14c0X"}},12:function(e,t,a){e.exports={container:"App_container__16xwv",customTooltipStyle:"App_customTooltipStyle__3aNaI",timetableWrapper:"App_timetableWrapper__D3iit",noSelect:"App_noSelect__6Cv3t",readMode:"App_readMode__3YI_6"}},14:function(e,t,a){e.exports={header:"Header_header__1QYfQ",container:"Header_container__3MpvB",logo:"Header_logo__1FJju",siteName:"Header_siteName__1Yb1g"}},18:function(e,t,a){e.exports={searchBar:"SearchBar_searchBar__3QjrG",termInfo:"SearchBar_termInfo__38hRZ",input:"SearchBar_input__2jK8Y"}},21:function(e,t,a){e.exports={button:"Button_button__1rhdk",text:"Button_text__2twUf"}},22:function(e,t,a){e.exports={timetableControls:"CourseInfoSection_timetableControls__1OOKX",none:"CourseInfoSection_none__3ZgoL"}},29:function(e,t,a){e.exports={faq:"Faq_faq__5FPd2"}},30:function(e,t,a){e.exports={separator:"TimetableSeparator_separator__Tw8wk"}},32:function(e,t,a){e.exports=a(66)},37:function(e,t,a){},4:function(e,t,a){e.exports={timetable:"Timetable_timetable__2JsCh",time:"Timetable_time__3ygG4",weekday:"Timetable_weekday__3dmdS",timesTr:"Timetable_timesTr__3kdMp",alt:"Timetable_alt__Amp7i",timeDiv:"Timetable_timeDiv__8ku6W"}},62:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(28),l=a.n(s),o=(a(37),a(6)),i=a(7),c=a(9),d=a(8),h=a(10),m=a(5),u=a(0),p=a.n(u);function f(){var e="";for(var t in window.timetable){for(var a="",n=0;n<window.timetable[t].length;n++)0!==n&&(a+=","),a+=window.timetable[t][n];e+=t+":_"+a+"!"}var r="./?semester="+window.semester.num+"&timetable="+encodeURIComponent(e);return p()("#dialog").children().remove(),p()("#dialog").append("<a href='"+r+"' target='_blank'><button id='readmodebtn' style='width: 120px;'>READ-ONLY</button></a>"),p()("#readmodebtn").button(),r}var v=a(21),w=a.n(v),b=function(e){return r.a.createElement("button",Object.assign({},e,{className:Object(m.a)(w.a.button,e.className)}),r.a.createElement("span",{className:w.a.text},e.children))},g=a(11),E=a.n(g),_=function(){return Object(n.useEffect)((function(){p()("#show-faq").click((function(e){p()("#faq").dialog("open"),e.preventDefault()}))})),r.a.createElement("div",{className:E.a.aside},r.a.createElement("div",{id:"dialog"}),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("input",{id:"shareLinkInput",className:E.a.shareLinkInput,type:"text"})),r.a.createElement("p",{className:E.a.copyResult,id:"copyResult"}),r.a.createElement("p",null,r.a.createElement(b,{onClick:function(){return function(){var e=f();e=window.CLIENT_PATH+e.substr(2),p()("#shareLinkInput").val(e).show().select();var t="Press CTRL+C (Windows) to Copy.";try{document.execCommand("copy")?p()("#copyResult").text("Auto Copied to Clip Board."):p()("#copyResult").text(t)}catch(a){p()("#copyResult").text(t)}}()}},"Get Share Link")),r.a.createElement("p",null,r.a.createElement(b,{id:"show-faq",className:E.a.faqButton},"Show FAQ"))),r.a.createElement("div",null,r.a.createElement("p",{className:E.a.lastUpdate},"Data Last Updated: ",r.a.createElement("br",null),r.a.createElement("span",{id:"update-time"}))))},y=a(22),C=a.n(y),k=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{color:"gray",fontSize:14,marginLeft:50}},'Courses with "TBA" date & time: ',r.a.createElement("span",{id:"no-tba"},"None"),r.a.createElement("span",{id:"tba-courses"})),r.a.createElement("table",{id:"timetable_controls",className:C.a.timetableControls},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Code"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Actions")),r.a.createElement("tr",{id:"none",className:C.a.none},r.a.createElement("td",{colspan:"3"},"No courses added."))),r.a.createElement("tbody",{id:"courselist"})))},A=(a(38),a(39),a(40),a(29)),N=a.n(A),T=function(e){return Object(n.useEffect)((function(){p()("#faq").dialog({autoOpen:!1,width:800,buttons:[{text:"Close",click:function(){p()(this).dialog("close")}}]})})),r.a.createElement("div",{title:"FAQ",id:"faq",className:N.a.faq},r.a.createElement("p",null,r.a.createElement("strong",null,"Q:")," Is data always up-to-date?",r.a.createElement("br",null),r.a.createElement("strong",null,"A:")," No, data have to be manually updated by running ",r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"//coust.442.hk/json/mkdata.php"},"this page")," to obtain and save data from ",r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://w5.ab.ust.hk/wcq/cgi-bin/"},"HKUST Class Schedule and Quota")," by crawling and parsing the website, i.e. data are correct up to the latest time of running the data retrieving page.",r.a.createElement("br",null)),r.a.createElement("p",null,r.a.createElement("strong",null,"Q:")," What is READ-ONLY Mode?",r.a.createElement("br",null),r.a.createElement("strong",null,"A:")," In READ-ONLY Mode, you can only view the timetable. And your original timetable in non read mode will not be affected. You may exit read mode and view your own timetable by clicking the logo (which returns to the home page).",r.a.createElement("br",null)),r.a.createElement("p",null,r.a.createElement("strong",null,"Q:")," Does the web app supports all browsers?",r.a.createElement("br",null),r.a.createElement("strong",null,"A:")," No, the web app uses jQuery and thus requires browser version supporting jQuery (e.g. IE9+).",r.a.createElement("br",null)),r.a.createElement("p",null,r.a.createElement("strong",null,"If you any enquires, please find us on ",r.a.createElement("a",{href:"https://www.facebook.com/CoUST.HK"},"our Facebook page"),"."),r.a.createElement("br",null)),r.a.createElement("p",null,r.a.createElement("strong",null,"GitHub:")," ",r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://github.com/antonytse/CoUST"},"https://github.com/antonytse/CoUST"),r.a.createElement("br",null)),r.a.createElement("p",null,r.a.createElement("strong",null,"Authors:")," Alan Chung, Antony Tse",r.a.createElement("br",null)))},x=a(31),O=a(18),I=a.n(O),S=function(){var e=Object(n.useState)(""),t=Object(x.a)(e,2),a=t[0],s=t[1];return r.a.createElement("div",{className:I.a.searchBar},r.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},r.a.createElement("ul",null,r.a.createElement("li",{className:I.a.termInfo,id:"termInfo"},"Loading..."),r.a.createElement("li",null,r.a.createElement("input",{className:I.a.input,id:"add",type:"text",placeholder:"Add Courses to Timetable",value:a,onChange:function(e){return s(e.target.value)},onBlur:function(){return s("")}})))))},j=a(14),q=a.n(j),M=function(){return r.a.createElement("header",{className:q.a.header},r.a.createElement("div",{className:q.a.container},r.a.createElement("a",{className:q.a.logo,href:"."},r.a.createElement("span",{className:q.a.siteName},"CoUST")),r.a.createElement(S,null)))},D=a(30),R=a.n(D),P=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("tr",{className:R.a.separator},r.a.createElement("th",null),r.a.createElement("td",{colSpan:28}))}}]),t}(r.a.PureComponent),U=a(4),L=a.n(U);function B(e){return 1==="".concat(e).length?"0".concat(e):"".concat(e)}var H=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).hours=[9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],a.weekdays={Mo:"MON",Tu:"TUE",We:"WED",Th:"THU",Fr:"FRI",Sa:"SAT",Su:"SUN"},a.timetable=r.a.createRef(),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.timetable.current;p()(e).on("mouseover mouseleave","td",(function(e){if("separator"===e.target.className||"times-tr"===e.target.className||"timediv"===e.target.className||"time"===e.target.className);else if("mouseover"===e.type){(t=p()(this)).parent().parent().find("td").addClass("hover"),(a=t.attr("class").match(/h[0-2][0-9]/i))&&p()("."+a).addClass("hover")}else{var t,a;(t=p()(this)).parent().parent().find("td").removeClass("hover"),(a=t.attr("class").match(/h[0-2][0-9]/i))&&p()("."+a).removeClass("hover")}}))}},{key:"_renderHour",value:function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("th",{className:L.a.time},r.a.createElement("div",{className:L.a.timeDiv},B(e),":00")),r.a.createElement("th",{className:Object(m.a)(L.a.time,L.a.alt)},r.a.createElement("div",{className:L.a.timeDiv},B(e),":30")))}},{key:"_renderWeekday",value:function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("tbody",{id:e,className:Object(m.a)(L.a.days,"days")},r.a.createElement("tr",null,r.a.createElement("th",{className:Object(m.a)(L.a.weekday,"weekday"),rowSpan:1},this.weekdays[e]),this.hours.map((function(e,t){return 23===e?null:r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("td",{className:"h".concat(B(e)," m00")}),r.a.createElement("td",{className:"h".concat(B(e)," m30")}))})))),t<this.weekdays.size-1?null:r.a.createElement(P,null))}},{key:"render",value:function(){var e=this;return r.a.createElement("table",{ref:this.timetable,id:"timetable",className:Object(m.a)(L.a.timetable,"content")},r.a.createElement("colgroup",null),this.hours.map((function(e,t){return r.a.createElement("colgroup",{key:t,span:2})})),r.a.createElement("tbody",null,r.a.createElement("tr",{className:L.a.timesTr},this.hours.map((function(t,a){return e._renderHour(t,a)})))),Object.keys(this.weekdays).map((function(t,a){return e._renderWeekday(t,a)})))}}]),t}(r.a.PureComponent);a(53),a(54),a(55),a(56),a(19),a(58),a(59),a(60),a(61),a(62);function W(e){if(!window.loaded)return null;if(!window.data.hasOwnProperty(e))return null;for(var t=window.data[e].sections,a={},n=0;n<t.length;n++){var r=t[n].section.match(/[A-Za-z]+/i);"undefined"===typeof a[r]&&(a[r]=[]);for(var s=!1,l=0;l<a[r].length;l++)t[n].section===a[r][l]&&(s=!0);s||a[r].push(t[n].section)}var o=[];for(var i in a)o.push(i);return a.types=o,a}function F(){p.a.each(p()(".occupied"),(function(){var e=p()(this),t=p()(e).children("div.lesson").eq(0).attr("name").split("_")[0],a=""!==p()(e).children("div.lesson").eq(0).attr("datestart")&&""!==p()(e).children("div.lesson").eq(0).attr("dateend"),n=null,r=null;a&&(n=new Date(p()(e).children("div.lesson").eq(0).attr("datestart")),r=new Date(p()(e).children("div.lesson").eq(0).attr("dateend")));var s=p()(e).parentsUntil("tbody").parent().attr("id"),l=p()(e).attr("class").match(/h[0-9]{2}/i),o=p()(e).attr("class").match(/m[0-9]{2}/i),i=!1,c=p()("#"+s+" ."+l+"."+o+".occupied").length,d=p()("#"+s+" ."+l+"."+o+".hidden").length;if(1!==c||d>0)if(a){var h=p.a.makeArray(p()("#"+s+" ."+l+"."+o+".occupied"));p.a.each(p()("#"+s+" ."+l+"."+o+".hidden"),(function(){h.push(p()(this).prevUntil(".occupied").prev())})),console.log(h);for(var m=0;m<h.length&&!i;m++){var u=p()(h[m]).children("div.lesson").eq(0),f=p()(u);if(f.attr("name")&&t!==f.attr("name").split("_")[0]){var v=null;""!==p()(u).attr("datestart")&&""!==p()(u).attr("dateend")?(v=new Date(p()(u).attr("datestart")),+n>=+new Date(p()(u).attr("dateend"))||+r<=+v||(i=!0)):i=!0}}}else i=!0;for(var w=p()(e).next();p()(w).hasClass("hidden")&&!i;){if(l=p()(w).attr("class").match(/h[0-9]{2}/i),o=p()(w).attr("class").match(/m[0-9]{2}/i),c=p()("#"+s+" ."+l+"."+o+".occupied").length,d=p()("#"+s+" ."+l+"."+o+".hidden").length,c>0||1!==d)if(a){h=p.a.makeArray(p()("#"+s+" ."+l+"."+o+".occupied"));p.a.each(p()("#"+s+" ."+l+"."+o+".hidden"),(function(){h.push(p()(this).prevAll(".occupied").eq(0))}));for(m=0;m<h.length&&!i;m++){u=p()(h[m]).children("div.lesson").eq(0);if(t!==p()(u).attr("name").split("_")[0]){v=null;""!==p()(u).attr("datestart")&&""!==p()(u).attr("dateend")?(v=new Date(p()(u).attr("datestart")),+n>=+new Date(p()(u).attr("dateend"))||+r<=+v||(i=!0)):i=!0}}}else i=!0;w=p()(w).next()}p()(e).children(".lesson").removeClass("time-conflict"),i&&p()(e).children(".lesson").addClass("time-conflict")}))}function Q(e){var t=!0;return p()(e).children("td").each((function(){(p()(this).hasClass("occupied")||p()(this).hasClass("hidden"))&&(t=!1)})),t}function Y(){p()(".days").each((function(){for(var e=p()(this).children("tr").length,t=0;t<e-1&&e>1;t++)for(var a=p()(this).children("tr").eq(t),n=t+1;n<e;n++){var r=p()(this).children("tr").eq(n);p.a.each(p()(r).children("td").filter(".occupied"),(function(){var e=p()(this).attr("class").match(/h[0-9]{2}/i),t=p()(this).attr("class").match(/m[0-9]{2}/i),n=!0;(p()(a).find("."+e+"."+t).hasClass("occupied")||p()(a).find("."+e+"."+t).hasClass("hidden"))&&(n=!1);for(var r=p()(this).next();p()(r).hasClass("hidden")&&n;){var s=p()(r).attr("class").match(/h[0-9]{2}/i),l=p()(r).attr("class").match(/h[0-9]{2}/i);(p()(a).find("."+s+"."+l).hasClass("occupied")||p()(a).find("."+s+"."+l).hasClass("hidden"))&&(n=!1),r=p()(r).next()}if(n){var o=p()(this).children(".lesson").eq(0),i=p()(this).attr("colspan");p()(this).removeAttr("colspan");var c=p()(a).find("."+e+"."+t);p()(c).addClass("occupied"),p()(c).attr("colspan",i),p()(c).append(o);for(r=p()(this).next();p()(r).hasClass("hidden");)c=p()(c).next(),p()(c).addClass("hidden"),p()(r).removeClass("hidden"),r=p()(r).next();p()(this).children(".lesson").remove(),p()(this).removeClass("occupied")}}))}})),p()(".days").each((function(){var e=p()("#"+p()(this).attr("id")+" .weekday"),t=parseInt(p()(e).attr("rowspan"),10),a=p()(this).children("tr").length;if(a>1){for(var n=1;n<a;n++){var r=p()(this).children("tr").eq(n);Q(r)&&(p()(r).addClass("remove"),t--)}p()(e).attr("rowspan",t),p()("tr.remove").remove();var s=p()(this).children("tr").eq(0);Q(s)&&p()(this).children("tr").length>1&&(t--,p()(e).attr("rowspan",t),p()(this).children("tr").eq(1).prepend(p()(e)),p()(s).remove())}})),p()(".days").each((function(){1===p()(this).children("tr").length&&p()(this).find(".time-conflict").removeClass("time-conflict")}));var e=!0;p()("#Sa").children("tr").each((function(){if(!Q(p()(this)))return e=!1,!1})),e&&p()("#Sa").removeClass("hidden").addClass("hidden");var t=!0;p()("#Su").children("tr").each((function(){if(!Q(p()(this)))return t=!1,!1})),t&&p()("#Su").removeClass("hidden").addClass("hidden"),p()(".days").each((function(){1===p()(this).children("tr").length&&(p()(this).children("tr").find("th.weekday").attr("rowspan",2),p()(this).append('<tr class="spare-tr"><td class="h09 m00"></td><td class="h09 m30"></td><td class="h10 m00"></td><td class="h10 m30"></td><td class="h11 m00"></td><td class="h11 m30"></td><td class="h12 m00"></td><td class="h12 m30"></td><td class="h13 m00"></td><td class="h13 m30"></td><td class="h14 m00"></td><td class="h14 m30"></td><td class="h15 m00"></td><td class="h15 m30"></td><td class="h16 m00"></td><td class="h16 m30"></td><td class="h17 m00"></td><td class="h17 m30"></td><td class="h18 m00"></td><td class="h18 m30"></td><td class="h19 m00"></td><td class="h19 m30"></td><td class="h20 m00"></td><td class="h20 m30"></td><td class="h21 m00"></td><td class="h21 m30"></td><td class="h22 m00"></td><td class="h22 m30"></td></tr>'))})),F()}function Z(e){p()("td.occupied div.lesson.virtual."+e).each((function(){var e=p()(this).parent(),t=p()(e).attr("colspan");p()(e).removeAttr("colspan"),p()(e).removeClass("occupied");for(var a=p()(e).next(),n=1;n<t;n++)p()(a).removeClass("hidden"),a=p()(a).next();p()(this).remove()})),Y()}function G(e,t){if("undefined"!==typeof Storage)localStorage.setItem(e,t);else{var a=new Date;a.setTime(a.getTime()+24*window.COOKIE_EXPIRE_DAYS*60*60*1e3);var n="expires="+a.toGMTString();document.cookie=e+"="+t+"; "+n}}function K(){if(!window.readMode){var e="";for(var t in window.timetable){for(var a="",n=0;n<window.timetable[t].length;n++)0!==n&&(a+=","),a+=window.timetable[t][n];e+=t+":_"+a+"!"}G("timetable",encodeURIComponent(e)),G("timetable-semester",window.semester.num)}}function X(e,t,a,n,r,s,l,o,i){p()("#"+a).hasClass("hidden")&&p()("#"+a).removeClass("hidden");var c="color"+window.color,d="";s||(d="draggable");var h="real";l&&(h="virtual",c=p()("div.lesson.real."+e).attr("class").match(/color[0-9]+/i)),window.courseColor.hasOwnProperty(e)&&(c="color"+window.courseColor[e]);var m=n+" - "+r,u="",v="";o?(m=o[0]+" - "+o[1]+"&#10;"+m,o.multiple&&(u=" ["+o.index+"]"),v="datestart='"+o[0]+"' dateend='"+o[1]+"'"):v="datestart='' dateend=''",v=v.replace("-"," ");var w=i.room;"TBA"==w&&(w="Rm: TBA");var b=w.replace(/, Lift [0-9]+((-|,)( )*[0-9]+)?/gi,"");if(b=(b=(b=b.replace(/\([0-9]+\)/gi,"")).replace(/Lecture Theater /gi,"LT")).replace(/, [A-Z ]+/gi,""),m+="&#10;"+w+"&#10;Instructor: ",0===i.instructor.length&&i.instructor.push("TBA"),1===i.instructor.length)m+=i.instructor[0];else for(var g=0;g<i.instructor.length;g++)m+="&#10; - "+i.instructor[g];var E="<div "+v+" title='"+m+"' name='"+e+"_"+t+"' class='"+c+" lesson "+d+" "+h+" "+e+" "+t+"'><div>"+e+"<br/>"+t+u+"<br/>"+b+"</div></div>",_=parseInt(n.substr(0,2).concat(n.substr(3,2)),10);"PM"===n.substr(5,2)&&"12"!==n.substr(0,2)&&(_+=1200);var y=parseInt(r.substr(0,2)+r.substr(3,2),10);"PM"===r.substr(5,2)&&"12"!==r.substr(0,2)&&(y+=1200);var C=Math.floor(_/100),k=_%100,A=Math.floor(y/100),N=y%100,T="h".concat(C<10?"0".concat(C):C),x=30*Math.ceil(k/30)%60,O="m".concat(x<10?"0".concat(x):x),I=Math.ceil((60*A+N-60*C-k)/30),S=!1,j=!1;if(p()("#"+a).children("tr").each((function(){if(S)return!1;var a=p()(this).children("td."+T+"."+O).eq(0);if(p()(a).hasClass("occupied")||p()(a).hasClass("hidden"))j=!0;else{for(var n=!0,r=p()(a).next(),o=1;o<I;o++)(p()(r).hasClass("occupied")||p()(r).hasClass("hidden"))&&(n=!1),r=p()(r).next();if(n){p()(a).append(E),p()(a).addClass("occupied"),p()(a).attr("colspan",I);var i=p()(a).next();for(o=1;o<I;o++)p()(i).addClass("hidden"),i=p()(i).next();if(S=!0,l){var c=p()("div.lesson.virtual."+e+"."+t);c.droppable({drop:function(){c.addClass("toadd"),c.removeClass("virtual-hover")},over:function(e,t){c.addClass("virtual-hover"),console.info("Event: ",{clientX:e.clientX,clientY:e.clientY},"UI: ",t.offset)},out:function(e,t){c.removeClass("virtual-hover")}})}else if(!s){var d=p()("div.lesson.real."+e+"."+t);p()(d).draggable({appendTo:"body",helper:"clone",start:function(a,n){p()(d).eq(0).parentsUntil("td").parent();var r=p()(d).eq(0);p()(n.helper).css("width",p()(r).outerWidth()),p()(n.helper).css("height",p()(r).outerHeight()),p()(n.helper).addClass("move"),p()(n.helper).removeAttr("title"),function(e,t){for(var a=t.match(/[A-Z]+/i),n=W(e),r=1===n[a].length,s=0;s<n[a].length;s++)n[a][s]!==t&&z(window.data[e],n[a][s],r,!0);F()}(e,t)},stop:function(a,n){if(p()("div.lesson.toadd."+e).length>0){var r=p()("div.lesson.toadd."+e).eq(0).attr("name").split("_")[1];Z(e),function(e,t){for(var a=0;a<window.timetable[e].length;)window.timetable[e][a]===t?window.timetable[e].splice(a,1):a++;p()(".tba."+e+"."+t).remove(),0===p()("#tba-courses").children().length&&p()("#no-tba").show(),p()("td.occupied div.lesson."+e+"."+t).each((function(){var e=p()(this).parent(),t=p()(e).attr("colspan");p()(e).removeAttr("colspan"),p()(e).removeClass("occupied");for(var a=p()(e).next(),n=1;n<t;n++)p()(a).removeClass("hidden"),a=p()(a).next();p()(this).remove()})),Y(),f()}(e,t),z(window.data[e],r,s,!1)}else Z(e)}})}}else j=!0}})),!S){var q=parseInt(p()("#"+a+" th").attr("rowspan"),10)+1;p()("#"+a+" th").attr("rowspan",q);return p()("#"+a).append('<tr><td class="h09 m00"></td><td class="h09 m30"></td><td class="h10 m00"></td><td class="h10 m30"></td><td class="h11 m00"></td><td class="h11 m30"></td><td class="h12 m00"></td><td class="h12 m30"></td><td class="h13 m00"></td><td class="h13 m30"></td><td class="h14 m00"></td><td class="h14 m30"></td><td class="h15 m00"></td><td class="h15 m30"></td><td class="h16 m00"></td><td class="h16 m30"></td><td class="h17 m00"></td><td class="h17 m30"></td><td class="h18 m00"></td><td class="h18 m30"></td><td class="h19 m00"></td><td class="h19 m30"></td><td class="h20 m00"></td><td class="h20 m30"></td><td class="h21 m00"></td><td class="h21 m30"></td><td class="h22 m00"></td><td class="h22 m30"></td></tr>'),void X(e,t,a,n,r,s,l,o,i)}j&&function(e,t,a){var n=parseInt(t.substr(0,2).concat(t.substr(3,2)),10);"PM"===t.substr(5,2)&&"12"!==t.substr(0,2)&&(n+=1200);var r=parseInt(a.substr(0,2)+a.substr(3,2),10);"PM"===a.substr(5,2)&&"12"!==a.substr(0,2)&&(r+=1200);var s=Math.floor(n/100),l=n%100,o=Math.floor(r/100),i=r%100;i<=30?i=0:i<=60&&(i=30);for(var c=s;c<=o;c++)for(var d=0;d<60;d+=30)if(!(c===s&&d<l)){if(c===o&&d>i)break;var h="h".concat(c<10?"0".concat(c):c),m="m".concat(d<10?"0".concat(d):d);p.a.each(p()("#"+e+" ."+h+"."+m),(function(){if(p()(this).hasClass("hidden")){var e=p()(this).prevUntil(".occupied").prev();p()(e).children(".lesson").removeClass("time-conflict").addClass("time-conflict")}else p()(this).hasClass("occupied")&&p()(this).children(".lesson").removeClass("time-conflict").addClass("time-conflict")}))}}(a,n,r),p()("div.lesson."+e).parentsUntil("tr").parent().removeClass("spare-tr"),K(),f(),F(),window.readMode&&p()(".lesson.draggable").draggable("disable")}function z(e,t,a,n){var r=e.code;n||window.timetable[r].push(t);for(var s=function(e,t){for(var a=[],n=0;n<window.data[e].sections.length;n++)window.data[e].sections[n].section===t&&a.push(window.data[e].sections[n]);return a}(r,t),l="",o=null,i=null,c=null,d=0;d<s.length;d++){var h=s[d].datetime,m=0;if(2===h.length&&(m=1),1===m&&((o=h[0].match(/[0-9]{2}-[A-Z]{3}-[0-9]{4}/gi)).index=d,s.length>1?o.multiple=!0:o.multiple=!1),"TBA"!==h[0]){i=h[m].match(/(Mo|Tu|We|Th|Fr|Sa|Su)/gi),l+=c=h[m].match(/[0-9]{2}:[0-9]{2}[A|P]M/gi),null!==o&&2===o.length&&(l=o[0]+" - "+o[1]+" "+l);for(var u=0;u<i.length;u++)X(r,t,i[u],c[0],c[1],a,n,o,s[d])}else{var v="<span class='tba "+r+" "+t+"'>";n||(p()("#no-tba").is(":hidden")&&(v+=", "),v+=e.code+" "+t+"</span>",p()("#tba-courses").append(v),p()("#no-tba").hide()),K(),f()}}}function J(e,t){if(!window.loaded)return console.log("Please try again later as data is still loading..."),!1;var a=p()("#add").val().trim();""!==typeof e&&(a=e);var n=a.split(" ")[0].trim();if(n=n.substr(0,n.length-1),""===a)return console.log("No course code"),!1;if(!window.data.hasOwnProperty(n))return console.log("Course not found: "+n),!1;if(window.timetable.hasOwnProperty(n))return alert("Course already added!"),!1;window.timetable[n]=[];for(var r=window.data[n],s=n+": "+r.name,l=0;l<window.searchhints.length;){if(window.searchhints[l]==s){window.searchhints.splice(l,1);break}l++}var o=W(n);if(""===t)for(l=0;l<o.types.length;l++){var i=o.types[l];z(r,o[i][0],c=1===o[i].length,!1)}else for(l=0;l<t.length;l++){var c=1===o[t[l].match(/[A-Z]+/i)].length;z(r,t[l],c,!1)}p()("#none").hide();var d="<a target='_blank' href='"+("https://w5.ab.ust.hk/wcq/cgi-bin/"+window.terms[0].num+"/subject/"+n.substr(0,4)+"#"+n)+"'><img title='Details' class='actionsImg' src='images/info.png' /></a>&nbsp;&nbsp;";d+="<a href='javascript:removeCourse(\""+n+"\")'><img title='Remove' class='actionsImg' src='images/cross.png' /></a>";var h="<tr class='color"+window.color+" "+n+"' name='"+n+"'><td>"+n+"</td><td>"+window.data[n].name+"</td><td>"+d+"</td></tr>";return p()("#courselist").children("tr").each((function(){null!==h&&n<p()(this).attr("name")&&(p()(h).insertBefore(p()(this)),h=null)})),null!==h&&p()("#courselist").append(h),window.courseColor[n]=window.color,window.color=(window.color+1)%10,p()("#add").val(""),f(),!1}function V(e){if("undefined"!==typeof Storage)return null==localStorage.getItem(e)?"":localStorage.getItem(e);for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var r=a[n];" "===r.charAt(0);)r=r.substring(1);if(-1!==r.indexOf(t))return r.substring(t.length,r.length)}return""}function $(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var n=t[a].split("=");if(n[0]===e)return n[1]}return null}window.removeCourse=function(e){window.readMode?alert("Not allowed in Read-Only Mode"):(p()(".tba."+e).remove(),0===p()("#tba-courses").children().length&&p()("#no-tba").show(),p()("td.occupied div.lesson."+e).each((function(){var e=p()(this).parent(),t=p()(e).attr("colspan");p()(e).removeAttr("colspan"),p()(e).removeClass("occupied");for(var a=p()(e).next(),n=1;n<t;n++)p()(a).removeClass("hidden"),a=p()(a).next();p()(this).remove()})),p()("#courselist ."+e).remove(),0===p()("#courselist").children("tr").length&&p()("#none").show(),window.searchhints.push(e+": "+window.data[e].name),window.searchhints.sort(),delete window.timetable[e],delete window.courseColor[e],K(),Y(),f())},window.jQuery=p.a,a(63),window.readMode=!1,window.color=0,window.courseColor=[],window.terms="",window.data="",window.loaded=!1,window.searchhints=[],window.semester=null,window.timetable=[],window.API_PATH="https://coust.442.hk/",window.CLIENT_PATH="https://coust.github.io/",window.COOKIE_EXPIRE_DAYS=50;var ee=function(){p.a.ajax({cache:!0,url:window.API_PATH+"json/data.php",type:"GET",dataType:"json"}).done((function(e){window.data=e,window.terms=window.data.terms,window.semester=window.terms.current,window.loaded=!0,p.a.each(window.data,(function(e,t){if("terms"===e||"lastUpdated"===e)return!0;window.searchhints.push(e+": "+t.name)})),f(),p()("#add").autocomplete({source:window.searchhints,minLength:0,focus:function(e,t){e.preventDefault()},select:function(e,t){e.preventDefault(),J(t.item.value,"")}}).focus((function(){p()(this).autocomplete("search","")})),p()("#add").click((function(){p()(this).autocomplete("search",p()(this).val())})),p()("#update-time").html(window.data.lastUpdated),p()("#termInfo").html(window.terms.current.text),function(){var e="";null!==$("timetable")?$("semester")==window.terms.current.num?(e=$("timetable"),window.readMode=!0,p()("#readmode").show()):window.location.replace(window.CLIENT_PATH):(V("timetable-semester")==window.terms.current.num&&(e=V("timetable")),p()("#readmode").hide()),e=decodeURIComponent(e),p()("#loading").show();for(var t=e.split("!"),a=0;a<t.length;a++)if(""!==t[a]){var n=t[a].split("_");J(n[0],n[1].split(","))}p()("#loading").hide(),p()(".content").show(),window.readMode?(p()(".lesson.draggable").draggable("disable"),p()(".lesson").css("cursor","default"),p()("img").filter("[title='Remove']").parents("a").hide(),p()("#add").val("Click the logo to exit Read-Only Mode"),p()("#add").prop("disabled",!0)):p()("#add").trigger("focusout")}(),Y()}))},te=a(12),ae=a.n(te),ne=(a(64),a(65),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){p()(document).tooltip({position:{my:"left+15 center",at:"right center+5"},tooltipClass:ae.a.customTooltipStyle}),ee()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null),r.a.createElement("div",{className:ae.a.container},r.a.createElement("div",{id:"timetable_wrapper",className:Object(m.a)(ae.a.timetableWrapper,ae.a.noSelect)},r.a.createElement("div",{id:"readmode",className:ae.a.readMode},r.a.createElement("span",{title:"No Changes Allowed"},"READ-ONLY")),r.a.createElement("div",{id:"loading",style:{display:"block",width:200,margin:"0 auto",paddingTop:50,fontSize:50}},r.a.createElement("span",null,"Loading...")),r.a.createElement(H,null)),r.a.createElement("div",{className:"content"},r.a.createElement(_,null),r.a.createElement(k,null)),r.a.createElement(T,null)))}}]),t}(r.a.PureComponent));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.76dab028.chunk.js.map